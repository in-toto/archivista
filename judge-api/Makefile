FILES := $(shell grep -r -l -e "Code generated by ent" -e "Code generated by github.com/99designs/gqlgen" --include='*.go' *)

.PHONY: hide-files

hide-files:
	@echo "Hiding Go files containing 'Code generated by ent' or 'Code generated by github.com/99designs/gqlgen'"
	@rm -f .gitattributes || true && touch .gitattributes
	@for file in $(FILES); do \
		echo "./$$file -diff" >> .gitattributes; \
	done
